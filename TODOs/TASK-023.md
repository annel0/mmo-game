# TASK-023: Game Actions Implementation

## üìã –û–ø–∏—Å–∞–Ω–∏–µ
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∏–≥—Ä–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π:
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ NPC
- –°–∏—Å—Ç–µ–º–∞ –∞—Ç–∞–∫ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –∏ —É—Ä–æ–Ω–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –ü–æ–¥–±–æ—Ä –∏ –≤—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ (—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –∏ —Ä–∞–∑—Ä—É—à–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤)
- –≠–º–æ—Ü–∏–∏ –∏ –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã

### 1. –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–µ–π—Å—Ç–≤–∏–π
- **–§–∞–π–ª**: `internal/network/game_handler_pb.go`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
  - –ó–∞–º–µ–Ω–µ–Ω TODO –Ω–∞ –≤—ã–∑–æ–≤ `processEntityAction()` —Å –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º `(success, message, shouldBroadcast)`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —É—Å–ª–æ–≤–Ω–æ–π —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–∞–º

### 2. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π

#### ACTION_INTERACT - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Å—É—â–Ω–æ—Å—Ç—è–º–∏ (NPC, –∏–≥—Ä–æ–∫–∏) –≤ —Ä–∞–¥–∏—É—Å–µ 3 –±–ª–æ–∫–æ–≤
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–ª–æ–∫–∞–º–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∞ `IsInteractable()`)
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ü–µ–ª–∏

#### ACTION_ATTACK - –ê—Ç–∞–∫–∞
- –°–∏—Å—Ç–µ–º–∞ –∞—Ç–∞–∫ —Å –±–∞–∑–æ–≤—ã–º —É—Ä–æ–Ω–æ–º 10 HP
- –î–∞–ª—å–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏ 2 –±–ª–æ–∫–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `EntityBehavior.OnDamage()`
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–∞–º–æ–∞—Ç–∞–∫–∏

#### ACTION_USE_ITEM - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–∑–µ–ª—å—è, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞–ª–∏—á–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ (–∑–∞–≥–ª—É—à–∫–∞)

#### ACTION_PICKUP - –ü–æ–¥–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –ü–æ–¥–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Ç–∏–ø–∞ `EntityTypeItem` –≤ —Ä–∞–¥–∏—É—Å–µ 2 –±–ª–æ–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –∏–∑ –º–∏—Ä–∞ –ø–æ—Å–ª–µ –ø–æ–¥–±–æ—Ä–∞

#### ACTION_DROP - –í—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –í—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é –∏–ª–∏ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω–∏–µ `EntityTypeItem` –≤ –º–∏—Ä–µ

#### ACTION_BUILD_PLACE - –†–∞–∑–º–µ—â–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤
- –†–∞–∑–º–µ—â–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤ –≤ —Ä–∞–¥–∏—É—Å–µ 5 –±–ª–æ–∫–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –≤–æ–∑–¥—É—Ö)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –±–ª–æ–∫–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–º–µ–Ω—å)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –±–ª–æ–∫–æ–≤

#### ACTION_BUILD_BREAK - –†–∞–∑—Ä—É—à–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤
- –†–∞–∑—Ä—É—à–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤ –≤ —Ä–∞–¥–∏—É—Å–µ 5 –±–ª–æ–∫–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `IsBreakable()` –¥–ª—è –±–ª–æ–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –ø—Ä–∏ —Ä–∞–∑—Ä—É—à–µ–Ω–∏–∏
- –ó–∞–º–µ–Ω–∞ –±–ª–æ–∫–∞ –Ω–∞ –≤–æ–∑–¥—É—Ö

#### ACTION_EMOTE - –≠–º–æ—Ü–∏–∏
- –ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ —ç–º–æ—Ü–∏–π —Å —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–µ–π –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–∞–º

#### ACTION_RESPAWN - –í–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ
- –í–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –Ω–∞ —Å–ø–∞–≤–Ω–µ
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∏ —Å—Ç–∞—Ç—É—Å–∞ `Active`

### 3. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã

#### calculateDistance()
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è –ø–æ–∑–∏—Ü–∏—è–º–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–æ—Ä–µ–º—ã –ü–∏—Ñ–∞–≥–æ—Ä–∞ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏

#### –ë–ª–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `world.NewBlock()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–ª–æ–∫–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `block.Get()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –±–ª–æ–∫–æ–≤

#### –°–∏—Å—Ç–µ–º–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `EntityManager` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç—è–º–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `EntityBehavior` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É—Ä–æ–Ω–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å—É—â–Ω–æ—Å—Ç–µ–π

#### –°–µ—Ç–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
- –£—Å–ª–æ–≤–Ω–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π (–Ω–µ –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É—é—Ç—Å—è)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å `success`, `message`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ—Ç–æ–∫–æ–ª –±—É—Ñ–µ—Ä–∞–º–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
```
handleEntityAction() 
  ‚Üì
processEntityAction() ‚Üí switch –ø–æ ActionType
  ‚Üì
handleXXXAction() ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è + –ª–æ–≥–∏–∫–∞ + —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  ‚Üì
(success, message, shouldBroadcast)
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∞–∫—Ç–æ—Ä–∞ –∏ —Ü–µ–ª–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–µ–π—Å—Ç–≤–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ (–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –ø—Ä–æ—Ö–æ–¥–∏–º–æ—Å—Ç—å)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∞–∫—Ç–æ—Ä–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–∞–º–æ–∞—Ç–∞–∫–∏ –∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –í—Å–µ 9 —Ç–∏–ø–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- ‚úÖ –£—Å–ª–æ–≤–Ω–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- ‚úÖ –ü—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

## üéØ –ò—Ç–æ–≥
**TASK-023 –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–∞!** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–≥—Ä–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π, –≥–æ—Ç–æ–≤–∞—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ MMO —Å–µ—Ä–≤–µ—Ä–µ. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –±–ª–æ–∫–æ–≤, —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ —Å–µ—Ç–∏.

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π –∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∏—Å—Ç–µ–º–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è, –∫—Ä–∞—Ñ—Ç–∏–Ω–≥, —Ç–æ—Ä–≥–æ–≤–ª—è). 