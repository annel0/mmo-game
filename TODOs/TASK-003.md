# TASK-003: Полноценные трёхслойные блоки

## Описание
Доработать системы мира, сети и клиента для поддержки трёх логических слоёв: FLOOR, ACTIVE, CEILING.

## Цели
1. Блоки каждого слоя хранятся раздельно внутри чанка.
2. API Get/SetBlock работает с указанием слоя или использует ACTIVE по умолчанию.
3. Протокол умеет передавать RLE-сжатые данные трёх слоёв.
4. Коллизии и отрисовка используют слой ACTIVE (проходимость), FLOOR (высота) и CEILING (декор).

## Файлы/Папки
- internal/world/
- internal/protocol/
- internal/network/game_handler_pb.go
- client/

## Подзадачи
1. [x] Расширить структуру `Chunk` (массивы по слоям).
2. [x] Реализовать `SetBlockLayer` / `GetBlockIDLayer` (TODO сейчас).
3. [x] Мигрировать генератор мира (высота, вода, деревья).
4. [x] Отправка чанков: пересылка трёх буферов + обновление `REST_API_SUMMARY.md`.
5. [ ] Клиент: рендер трёх тайлов на один XY.
6. [x] Тесты DeepWater с учётом слоёв.

## Приоритет
P1

## Сложность
4/5

## Зависимости
—

## История изменений
- 2025-06-20: задача создана. 