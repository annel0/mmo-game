# üì§ –°–∏—Å—Ç–µ–º–∞ –∏—Å—Ö–æ–¥—è—â–∏—Ö Webhook'–æ–≤

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∏—Å—Ö–æ–¥—è—â–∏—Ö webhook'–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–≥—Ä–æ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ HTTP —Å–µ—Ä–≤–µ—Ä—ã. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è:

- üîç **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞–≥—Ä—É–∑–∫–µ, –æ—à–∏–±–∫–∞—Ö, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üõ°Ô∏è **–ê–Ω—Ç–∏—á–∏—Ç–∞** - –∞–ª–µ—Ä—Ç—ã –æ –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö –∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏  
- üë• **–ò–≥—Ä–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π** - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤, —á–∞—Ç
- üö® **–ê–ª–µ—Ä—Ç–æ–≤** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –ø—Ä–æ–±–ª–µ–º—ã —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é
- üìä **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π** - Discord –±–æ—Ç—ã, Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –≤–Ω–µ—à–Ω–∏–µ –ø–∞–Ω–µ–ª–∏

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    üì§    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    üåê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ò–≥—Ä–æ–≤–æ–π —Å–µ—Ä–≤–µ—Ä ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ Webhook Manager ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã ‚îÇ
‚îÇ                 ‚îÇ          ‚îÇ                 ‚îÇ          ‚îÇ                 ‚îÇ
‚îÇ ‚Ä¢ –ê–Ω—Ç–∏—á–∏—Ç       ‚îÇ          ‚îÇ ‚Ä¢ –û—á–µ—Ä–µ–¥—å       ‚îÇ          ‚îÇ ‚Ä¢ Discord       ‚îÇ
‚îÇ ‚Ä¢ –ò–≥—Ä–æ–∫–∏        ‚îÇ          ‚îÇ ‚Ä¢ Retry –ª–æ–≥–∏–∫–∞  ‚îÇ          ‚îÇ ‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥    ‚îÇ
‚îÇ ‚Ä¢ –°–µ—Ä–≤–µ—Ä        ‚îÇ          ‚îÇ ‚Ä¢ –ü–æ–¥–ø–∏—Å–∫–∏      ‚îÇ          ‚îÇ ‚Ä¢ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üöÄ REST API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –°–ø–∏—Å–æ–∫ webhook'–æ–≤
```bash
GET /api/admin/webhooks
Authorization: Bearer <JWT_TOKEN>
```

### –°–æ–∑–¥–∞–Ω–∏–µ webhook'–∞
```bash
POST /api/admin/webhooks
Authorization: Bearer <JWT_TOKEN>
Content-Type: application/json

{
  "name": "Discord Notifications",
  "url": "https://your-server.com/webhook",
  "events": ["player.joined", "anticheat.violation"],
  "secret": "optional_secret_key",
  "timeout": 30,
  "retry_count": 3
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ webhook'–∞
```bash
GET /api/admin/webhooks/{id}
Authorization: Bearer <JWT_TOKEN>
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ webhook'–∞
```bash
PUT /api/admin/webhooks/{id}
Authorization: Bearer <JWT_TOKEN>
Content-Type: application/json

{
  "name": "Updated Name",
  "active": false
}
```

### –£–¥–∞–ª–µ–Ω–∏–µ webhook'–∞
```bash
DELETE /api/admin/webhooks/{id}
Authorization: Bearer <JWT_TOKEN>
```

### –¢–µ—Å—Ç webhook'–∞
```bash
POST /api/admin/webhooks/{id}/test
Authorization: Bearer <JWT_TOKEN>
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
```bash
GET /api/admin/webhooks/events
Authorization: Bearer <JWT_TOKEN>
```

## üìã –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π

### üñ•Ô∏è –°–µ—Ä–≤–µ—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- `server.started` - –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
- `server.stopped` - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞  
- `server.error` - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞
- `server.high_cpu` - –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ CPU
- `server.high_memory` - –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
- `server.low_tps` - –ù–∏–∑–∫–∏–π TPS (–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)

### üë§ –°–æ–±—ã—Ç–∏—è –∏–≥—Ä–æ–∫–æ–≤
- `player.joined` - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
- `player.left` - –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
- `player.banned` - –ë–∞–Ω –∏–≥—Ä–æ–∫–∞
- `player.kicked` - –ö–∏–∫ –∏–≥—Ä–æ–∫–∞

### üõ°Ô∏è –ê–Ω—Ç–∏—á–∏—Ç —Å–æ–±—ã—Ç–∏—è
- `anticheat.violation` - –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
- `anticheat.ban` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∞–Ω

### üåç –°–æ–±—ã—Ç–∏—è –º–∏—Ä–∞
- `world.saved` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–∏—Ä–∞
- `world.load_error` - –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏

### üí¨ –î—Ä—É–≥–∏–µ —Å–æ–±—ã—Ç–∏—è
- `chat.message` - –°–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ
- `admin.command` - –ê–¥–º–∏–Ω –∫–æ–º–∞–Ω–¥–∞
- `security.alert` - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- `backup.completed` - –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞
- `backup.failed` - –û—à–∏–±–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

## üì¶ –§–æ—Ä–º–∞—Ç —Å–æ–±—ã—Ç–∏—è

```json
{
  "event_type": "player.joined",
  "timestamp": 1749468130,
  "server_id": "game_server_01",
  "source": "game_server",
  "environment": "development",
  "data": {
    "username": "player1",
    "ip": "192.168.1.100",
    "time": 1749468130
  }
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### HMAC –ø–æ–¥–ø–∏—Å–∏
Webhook'–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω—ã —Å–µ–∫—Ä–µ—Ç–Ω—ã–º –∫–ª—é—á–æ–º:

```bash
# –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –ø–æ–¥–ø–∏—Å—å—é
X-Webhook-Signature: sha256=abc123def456...
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ (Python)
```python
import hmac
import hashlib

def verify_signature(payload, secret, signature):
    expected = 'sha256=' + hmac.new(
        secret.encode(), 
        payload.encode(), 
        hashlib.sha256
    ).hexdigest()
    return hmac.compare_digest(expected, signature)
```

## üîÑ Retry –ª–æ–≥–∏–∫–∞

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚è∞ **–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞** –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
- üìä **–°—á–µ—Ç—á–∏–∫ –Ω–µ—É–¥–∞—á** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ webhook'–∞
- üö´ **–î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è** –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –æ—à–∏–±–æ–∫

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏ webhook'–æ–≤
- `last_used` - –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- `failure_count` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á
- `active` - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ webhook

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
curl -H "Authorization: Bearer $TOKEN" \
     http://localhost:8088/api/admin/webhooks | jq '.data.webhooks[].failure_count'
```

## üõ†Ô∏è –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Discord –±–æ—Ç
```javascript
// Discord Webhook
const webhook = {
  name: "Discord Bot",
  url: "https://discord.com/api/webhooks/...",
  events: ["anticheat.violation", "player.banned"],
  timeout: 10,
  retry_count: 2
}
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Grafana
```yaml
# Grafana Webhook
webhook:
  name: "Grafana Alerts"
  url: "https://grafana.company.com/webhook"
  events: ["server.high_cpu", "server.error"]
  secret: "monitoring_secret"
```

### Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```python
# Telegram Bot Webhook
import requests

def handle_webhook(event):
    if event['event_type'] == 'anticheat.violation':
        send_telegram_alert(event['data'])
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# Webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
WEBHOOK_TIMEOUT=30
WEBHOOK_MAX_RETRIES=3
WEBHOOK_SECRET_KEY=your_secret_key

# –°–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  
SERVER_ID=game_server_01
ENVIRONMENT=production
```

### –õ–∏–º–∏—Ç—ã
- **–ú–∞–∫—Å–∏–º—É–º webhook'–æ–≤**: 50 –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- **–ú–∞–∫—Å–∏–º—É–º —Å–æ–±—ã—Ç–∏–π**: 20 —Ç–∏–ø–æ–≤ –Ω–∞ webhook
- **–¢–∞–π–º–∞—É—Ç**: 1-120 —Å–µ–∫—É–Ω–¥
- **–ü–æ–≤—Ç–æ—Ä—ã**: 0-10 –ø–æ–ø—ã—Ç–æ–∫

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Webhook –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL webhook'–∞
2. ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ webhook –∞–∫—Ç–∏–≤–µ–Ω
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –Ω—É–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
4. ‚úÖ –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

### –í—ã—Å–æ–∫–∏–π failure_count
1. üîç –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å endpoint'–∞
2. ‚è∞ –£–≤–µ–ª–∏—á—å—Ç–µ timeout
3. üîÑ –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ retry –ø–æ–ø—ã—Ç–æ–∫
4. üõ†Ô∏è –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ –≤–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ

### –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
1. üìù –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ webhook –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω –¥–≤–∞–∂–¥—ã
2. üîÄ –£–±–µ–¥–∏—Ç–µ—Å—å –≤ idempotency –≤–∞—à–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
3. üìä –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `timestamp` –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:
1. üìñ –ò–∑—É—á–∏—Ç–µ –ª–æ–≥–∏ –∏–≥—Ä–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
2. üîç –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å webhook'–æ–≤ —á–µ—Ä–µ–∑ API
3. üß™ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
4. üì® –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–µ—Ä–≤–µ—Ä–∞

---

**üí° –°–æ–≤–µ—Ç**: –ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—Å—Ç–æ–≥–æ webhook'–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∞ –∑–∞—Ç–µ–º —Ä–∞—Å—à–∏—Ä—è–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏! 