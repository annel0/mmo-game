# –†–µ–∑—é–º–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ REST API + MariaDB

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. MariaDB –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **`internal/auth/maria_repository.go`** - —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è MariaDB
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
- –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º `UserRepository`
- –ú–µ—Ç–æ–¥—ã: —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### 2. REST API –°–µ—Ä–≤–µ—Ä
- **`internal/api/rest_server.go`** - –æ—Å–Ω–æ–≤–Ω–æ–π REST —Å–µ—Ä–≤–µ—Ä –Ω–∞ gin
- **`internal/api/middleware.go`** - JWT –∏ –∞–¥–º–∏–Ω middleware
- **`internal/api/integration.go`** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–≤—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º

### 3. –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã API
#### –ü—É–±–ª–∏—á–Ω—ã–µ:
- `GET /health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `POST /api/auth/login` - –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

#### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ (JWT):
- `GET /api/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /api/server` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ

#### –ê–¥–º–∏–Ω—Å–∫–∏–µ (JWT + admin –ø—Ä–∞–≤–∞):
- `POST /api/admin/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /api/admin/users` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `POST /api/admin/ban` - –±–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/admin/unban` - —Ä–∞–∑–±–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### Webhook:
- `POST /api/webhook` - –ø—Ä–∏–µ–º –≤–Ω–µ—à–Ω–∏—Ö —Å–æ–±—ã—Ç–∏–π

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- JWT —Ç–æ–∫–µ–Ω—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–æ–¥–ø–∏—Å–∏ –∏ –∏—Å—Ç–µ—á–µ–Ω–∏—è
- Middleware –¥–ª—è –∑–∞—â–∏—Ç—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –û–±—â–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∏–≥—Ä—ã –∏ API
- Graceful shutdown
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É MariaDB –∏ in-memory –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
```bash
cd examples/rest-api-server
go run main.go
```

### –° MariaDB (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å MariaDB
2. –°–æ–∑–¥–∞—Ç—å –ë–î `blockverse` –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `gameuser`
3. –í –∫–æ–¥–µ –∏–∑–º–µ–Ω–∏—Ç—å `UseMariaDB: true`
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
curl http://localhost:8080/health

# –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
curl -X POST http://localhost:8080/api/auth/login \
  -H 'Content-Type: application/json' \
  -d '{"username":"admin","password":"ChangeMe123!"}'

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Å JWT —Ç–æ–∫–µ–Ω–æ–º)
curl -H 'Authorization: Bearer YOUR_TOKEN' \
  http://localhost:8080/api/stats
```

## üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

```
internal/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ rest_server.go      # –û—Å–Ω–æ–≤–Ω–æ–π REST —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ middleware.go       # JWT –∏ –∞–¥–º–∏–Ω middleware  
‚îÇ   ‚îî‚îÄ‚îÄ integration.go      # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–π
‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îî‚îÄ‚îÄ maria_repository.go # MariaDB —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îî‚îÄ‚îÄ world/entity/
    ‚îî‚îÄ‚îÄ manager.go          # –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ GetStats()

examples/
‚îî‚îÄ‚îÄ rest-api-server/
    ‚îú‚îÄ‚îÄ main.go            # –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    ‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

go.mod                     # –î–æ–±–∞–≤–ª–µ–Ω—ã gin –∏ mysql –¥—Ä–∞–π–≤–µ—Ä
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - REST API –ª–µ–≥–∫–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è/–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã JWT + –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π
3. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É** - MariaDB, graceful shutdown, CORS
5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ–ª–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ README
6. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≤–µ–±-—Å–∞–π—Ç—É** - API –≥–æ—Ç–æ–≤ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üîÑ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ø–ª–∞–Ω–∞–º–∏

- ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** - JWT middleware
- ‚úÖ **–≠–Ω–¥–ø–æ–∏–Ω—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤** - `/api/admin/register`
- ‚úÖ **MariaDB –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –ø–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ MongoDB
- ‚úÖ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–∞–π—Ç—É** - –æ–±—â–∞—è –ë–î –¥–ª—è –∏–≥—Ä—ã –∏ —Å–∞–π—Ç–∞
- ‚úÖ **Webhook –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

## üîÆ –ß—Ç–æ –¥–∞–ª—å—à–µ

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å MariaDB –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
2. –°–æ–∑–¥–∞—Ç—å –≤–µ–±-—Å–∞–π—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —ç—Ç–æ—Ç API
3. –î–æ–±–∞–≤–∏—Ç—å rate limiting –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. –†–∞—Å—à–∏—Ä–∏—Ç—å –∞–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞–º–∏)
5. –î–æ–±–∞–≤–∏—Ç—å Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é 